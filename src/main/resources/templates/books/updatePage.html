<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<style>
<<<<<<< HEAD
=======

    .inp{
        margin-top: 40px;
        display: block;
    }
    .but{
        margin:0 auto;
    }

</style>
<link rel="stylesheet" href="../../static/dhl.css">
<body style="margin: 0">
<ul id="nav">
    <li><a th:href="@{/books/toIndex}">首页</a></li>
    <li><a th:href="@{/books/tpAddPage}">添加图书</a></li>
    <li><a th:href="@{/books/toUpdatePage}">更新图书</a></li>
</ul>
<table style=" border:0">
    <tr>
        <th style="width:1500px; height:150px; border:1px;" >
            <center>
                <table>
                    <th style="font-size: 50px;color: #fd7e14">图书操作</th>
                </table>
            </center>
        </th>
    </tr>
</table>
<center>
    <P th:text="${BOOK_NULL_MESSAGE}" style="margin: 0 auto;color: coral;font-size: 30px;">1</P>

    <div id="allbook" >

        <li v-for="item in info" style="list-style-type: none;display: inline-block;border: 1px solid black;margin-left: 50px;width: 300px;height: 250px;margin-top: 10px">
            <span class="inp">书名：{{ item.bookname }}</span>
            <span class="inp">简介：{{ item.detail }}</span>
            <span class="inp">数量：{{ item.num }}</span>
            <br>
            <span class="but"><input type="button" value="更改" @click="update(item)"></span>
            <span class="but"><input type="button" value="删除" @click="delete(item)"></span>
        </li>
        <div v-show="show" style="background-color:white;z-index:101;border: 1px solid black;border-radius: 5%;width: 500px;height: 500px;position: fixed;margin-left: 35%;bottom: 10%;font-weight: bolder">
            <div style="height: 50px;width: 100%;margin-top: 30px;font-size: 20px">您正在修改ID为{{ bkid }}，名为{{ bkname }}的图书信息</div>
            <br>
            <div style="margin-top: 10%">书名：<input type="text" id="bkname" v-model="bkname"></div>
            <br>
            <div style="margin-top: 10%">简介：<input type="text" id="bkdetail" v-model="bkdetail"></div>
            <br>
            <div style="margin-top: 10%">数量:{{ bknum }}</div>
            <br>
            <div style="margin-top: 10%"><input type="button" value="提交" @click="submit()"><input type="button" value="关闭" @click="close()"></div>
        </div>
        <div style="color:black;background-color:rgba(0,0,0,0.5);z-index:100;width: 100%;height: 100%;position: fixed;top: 0;bottom: 0" v-show="show"></div>

    </div>

</center>
>>>>>>> origin/master

    .inp{
        margin-top: 40px;
        display: block;
    }
    .but{
        margin:0 auto;
    }
</style>
<link rel="stylesheet" href="../dhl.css">
<body style="margin: 0">
<ul id="nav">
    <li><a th:href="@{/books/toIndex}">首页</a></li>
    <li><a th:href="@{/books/tpAddPage}">添加图书</a></li>
    <li><a th:href="@{/books/toUpdatePage}">更新图书</a></li>
</ul>
<table style=" border:0">
    <tr>
        <th style="width:1500px; height:150px; border:1px;" >
            <center>
                <table>
                    <th style="font-size: 50px;color: #fd7e14">图书操作</th>
                </table>
            </center>
        </th>
    </tr>
</table>
<center>
    <div id="allbook" >
        <li v-for="item in info" style="list-style-type: none;display: inline-block;border: 1px solid black;margin-left: 50px;width: 300px;height: 250px">
            <span class="inp">书名：{{ item.bookname }}</span>
            <span class="inp">简介：{{ item.detail }}</span>
            <span class="inp">数量：{{ item.num }}</span>
            <br>
            <span class="but"><input type="button" value="更改" @click="update()"></span>
            <span class="but"><input type="button" value="删除"></span>
        </li>

    </div>
</body>
<script src="https://unpkg.com/axios@0.18.0/dist/axios.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<<<<<<< HEAD
<script>

    var vue =new Vue({
        el:'#allbook',
        data:{
            info:[
                {'bookname':'123',
                    'detail':'345',
                    'num':1},
                {'bookname':'123',
=======
<script type="text/javascript" src="../../static/jquery-3.5.1.min.js"></script>
<script>
    var vue =new Vue({
        el:'#allbook',
        data:{
            bkname:'',
            bkid:'',
            bkdetail:'',
            bknum:0,
            info:[
                {'bookname':'1234',
                    'detail':'345',
                    'num':1},
                {'bookname':'1235',
>>>>>>> origin/master
                    'detail':'345',
                    'num':2}
                ,
                {'bookname':'123',
                    'detail':'345',
                    'num':2},
                {'bookname':'123',
                    'detail':'345',
                    'num':2},
                {'bookname':'123',
                    'detail':'345',
                    'num':2},
                {'bookname':'123',
                    'detail':'345',
                    'num':2},
                {'bookname':'123',
                    'detail':'345',
                    'num':2}
<<<<<<< HEAD
            ]
        },
        methods:{
            update:function (){
                var that=this
                axios.post('http://localhost:8080/toUpdatePage',{
                    bkmum:that.bkid
                }).then(function (response){
                    if(response==1){
                        alert('更新成功')
                    }
                    else{
                        alert('更新失败')
=======
            ],
            click:0,
            show:false
        },
        methods:{
            update:function (self){
                this.show=true
                this.bkname=self.bookname
                this.bkid=self.bkid
                this.bkdetail=self.detail
                this.bknum=self.num
            },
            close:function(){
                this.show=false
            },
            submit:function (){
                if($("#bkname").val()&&$("#bkdetail").val()){
                    axios.post('http://localhost:8080/toUpdatePage',{
                        bkid:this.bkid,
                        bkname:$('#bkname').val(),
                        bkdetail:$('#bkdetail').val(),
                        bknum:this.bknum
                    }).then(function (response){
                        if(response==1){
                            alert('更新成功')
                        }
                        else{
                            alert('更新失败')
                        }
                    })
                }
                else{
                    alert("请填写完整信息")
                }
            },
            delete:function(self){
                axios.post('http://localhost:8080/deleteBook',{
                bkid:self.bkid
                }).then(function (response){
                    if(response==1){
                        alert('删除成功')
                    }
                    else{
                        alert("删除失败")
>>>>>>> origin/master
                    }
                })
            }
        },
        mounted(){
            axios.get('http://localhost:8080/selectAll').then(response =>(this.data.info=response))
        }
    })
<<<<<<< HEAD
=======

>>>>>>> origin/master
</script>