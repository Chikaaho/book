<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<style>

    .inp {
        margin-top: 40px;
    }
</style>
<link rel="stylesheet" href="../../static/dhl.css">
<body>
<ul id="nav">
    <li><a th:href="@{/books/toIndex}">首页</a></li>
    <li><a th:href="@{/books/tpAddPage}">添加图书</a></li>
    <li><a th:href="@{/books/toUpdatePage}">更新图书</a></li>
</ul>
<table style=" border:0">
    <tr>
        <th style="width:2000px; height:150px; border:1px;">
            <center>
                <table>
                    <p style="font-size: 50px;color: #fd7e14">注册账号</p>
                </table>
            </center>
        </th>
    </tr>
</table>
<center>
    <div id="login" style="font-weight: bolder;width: 700px;height: 600px;border: 1px black solid;border-radius: 2%">
        <div><img src="../../static/img/index_logo.jpg" alt="图书馆" style="border-radius: 30%;width: 150px;height: 150px"
                  class="inp"></div>
        <form action="/user/regist.do" method="post">
            <div>账号：<input type="text" class="inp" id="user" name="username"></div>
            <div>密码：<input type="password" class="inp" id="password" name="password"></div>
            <!--<div>确认密码：<input type="password" class="inp" id="password2"></div>-->
            <div>编号：<input type="text" class="inp" id="num" name="userNumber"></div>
            <div>（请输入8位以内的数字）</div>
            <div>部门：<input type="text" class="inp" id="callname" name="classname"></div>

            <div><input type="submit" value="注册" class="inp"></div>
        </form>
    </div>
</center>

</body>
</html>
<script type="text/javascript" src="jquery-3.5.1.min.js"></script>
<script>
    function zc() {
        if ($('#password').val() && ($('#password').val() == $('#password2').val()) && $('#user').val()) {
            $.ajax('http://localhost:8080/regist.do', {
                data: {
                    'id': $('#user').value,
                    'pwd': $('#password').value,
                    'num': $('#num').value,
                    'callname': $('#callname').value
                },
                type: 'POST',
                datatype: 'json',
                success: function (data) {
                    if (data == 1) {
                        alert('欢迎登录')
                        history.go(0)
                    } else {
                        alert('账号或密码错误')
                    }
                }
            })
        } else {
            alert('请检查输入的账号和密码')
            console.log($('#password').val(), $('#password2').val(), $('#user').val())
        }

    }
</script>